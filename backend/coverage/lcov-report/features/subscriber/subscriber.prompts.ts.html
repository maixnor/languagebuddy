
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for features/subscriber/subscriber.prompts.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../index.html">All files</a> / <a href="index.html">features/subscriber</a> subscriber.prompts.ts</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">77.94% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>53/68</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">58.1% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>43/74</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">57.14% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>4/7</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">80.3% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>53/66</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line medium'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a>
<a name='L80'></a><a href='#L80'>80</a>
<a name='L81'></a><a href='#L81'>81</a>
<a name='L82'></a><a href='#L82'>82</a>
<a name='L83'></a><a href='#L83'>83</a>
<a name='L84'></a><a href='#L84'>84</a>
<a name='L85'></a><a href='#L85'>85</a>
<a name='L86'></a><a href='#L86'>86</a>
<a name='L87'></a><a href='#L87'>87</a>
<a name='L88'></a><a href='#L88'>88</a>
<a name='L89'></a><a href='#L89'>89</a>
<a name='L90'></a><a href='#L90'>90</a>
<a name='L91'></a><a href='#L91'>91</a>
<a name='L92'></a><a href='#L92'>92</a>
<a name='L93'></a><a href='#L93'>93</a>
<a name='L94'></a><a href='#L94'>94</a>
<a name='L95'></a><a href='#L95'>95</a>
<a name='L96'></a><a href='#L96'>96</a>
<a name='L97'></a><a href='#L97'>97</a>
<a name='L98'></a><a href='#L98'>98</a>
<a name='L99'></a><a href='#L99'>99</a>
<a name='L100'></a><a href='#L100'>100</a>
<a name='L101'></a><a href='#L101'>101</a>
<a name='L102'></a><a href='#L102'>102</a>
<a name='L103'></a><a href='#L103'>103</a>
<a name='L104'></a><a href='#L104'>104</a>
<a name='L105'></a><a href='#L105'>105</a>
<a name='L106'></a><a href='#L106'>106</a>
<a name='L107'></a><a href='#L107'>107</a>
<a name='L108'></a><a href='#L108'>108</a>
<a name='L109'></a><a href='#L109'>109</a>
<a name='L110'></a><a href='#L110'>110</a>
<a name='L111'></a><a href='#L111'>111</a>
<a name='L112'></a><a href='#L112'>112</a>
<a name='L113'></a><a href='#L113'>113</a>
<a name='L114'></a><a href='#L114'>114</a>
<a name='L115'></a><a href='#L115'>115</a>
<a name='L116'></a><a href='#L116'>116</a>
<a name='L117'></a><a href='#L117'>117</a>
<a name='L118'></a><a href='#L118'>118</a>
<a name='L119'></a><a href='#L119'>119</a>
<a name='L120'></a><a href='#L120'>120</a>
<a name='L121'></a><a href='#L121'>121</a>
<a name='L122'></a><a href='#L122'>122</a>
<a name='L123'></a><a href='#L123'>123</a>
<a name='L124'></a><a href='#L124'>124</a>
<a name='L125'></a><a href='#L125'>125</a>
<a name='L126'></a><a href='#L126'>126</a>
<a name='L127'></a><a href='#L127'>127</a>
<a name='L128'></a><a href='#L128'>128</a>
<a name='L129'></a><a href='#L129'>129</a>
<a name='L130'></a><a href='#L130'>130</a>
<a name='L131'></a><a href='#L131'>131</a>
<a name='L132'></a><a href='#L132'>132</a>
<a name='L133'></a><a href='#L133'>133</a>
<a name='L134'></a><a href='#L134'>134</a>
<a name='L135'></a><a href='#L135'>135</a>
<a name='L136'></a><a href='#L136'>136</a>
<a name='L137'></a><a href='#L137'>137</a>
<a name='L138'></a><a href='#L138'>138</a>
<a name='L139'></a><a href='#L139'>139</a>
<a name='L140'></a><a href='#L140'>140</a>
<a name='L141'></a><a href='#L141'>141</a>
<a name='L142'></a><a href='#L142'>142</a>
<a name='L143'></a><a href='#L143'>143</a>
<a name='L144'></a><a href='#L144'>144</a>
<a name='L145'></a><a href='#L145'>145</a>
<a name='L146'></a><a href='#L146'>146</a>
<a name='L147'></a><a href='#L147'>147</a>
<a name='L148'></a><a href='#L148'>148</a>
<a name='L149'></a><a href='#L149'>149</a>
<a name='L150'></a><a href='#L150'>150</a>
<a name='L151'></a><a href='#L151'>151</a>
<a name='L152'></a><a href='#L152'>152</a>
<a name='L153'></a><a href='#L153'>153</a>
<a name='L154'></a><a href='#L154'>154</a>
<a name='L155'></a><a href='#L155'>155</a>
<a name='L156'></a><a href='#L156'>156</a>
<a name='L157'></a><a href='#L157'>157</a>
<a name='L158'></a><a href='#L158'>158</a>
<a name='L159'></a><a href='#L159'>159</a>
<a name='L160'></a><a href='#L160'>160</a>
<a name='L161'></a><a href='#L161'>161</a>
<a name='L162'></a><a href='#L162'>162</a>
<a name='L163'></a><a href='#L163'>163</a>
<a name='L164'></a><a href='#L164'>164</a>
<a name='L165'></a><a href='#L165'>165</a>
<a name='L166'></a><a href='#L166'>166</a>
<a name='L167'></a><a href='#L167'>167</a>
<a name='L168'></a><a href='#L168'>168</a>
<a name='L169'></a><a href='#L169'>169</a>
<a name='L170'></a><a href='#L170'>170</a>
<a name='L171'></a><a href='#L171'>171</a>
<a name='L172'></a><a href='#L172'>172</a>
<a name='L173'></a><a href='#L173'>173</a>
<a name='L174'></a><a href='#L174'>174</a>
<a name='L175'></a><a href='#L175'>175</a>
<a name='L176'></a><a href='#L176'>176</a>
<a name='L177'></a><a href='#L177'>177</a>
<a name='L178'></a><a href='#L178'>178</a>
<a name='L179'></a><a href='#L179'>179</a>
<a name='L180'></a><a href='#L180'>180</a>
<a name='L181'></a><a href='#L181'>181</a>
<a name='L182'></a><a href='#L182'>182</a>
<a name='L183'></a><a href='#L183'>183</a>
<a name='L184'></a><a href='#L184'>184</a>
<a name='L185'></a><a href='#L185'>185</a>
<a name='L186'></a><a href='#L186'>186</a>
<a name='L187'></a><a href='#L187'>187</a>
<a name='L188'></a><a href='#L188'>188</a>
<a name='L189'></a><a href='#L189'>189</a>
<a name='L190'></a><a href='#L190'>190</a>
<a name='L191'></a><a href='#L191'>191</a>
<a name='L192'></a><a href='#L192'>192</a>
<a name='L193'></a><a href='#L193'>193</a>
<a name='L194'></a><a href='#L194'>194</a>
<a name='L195'></a><a href='#L195'>195</a>
<a name='L196'></a><a href='#L196'>196</a>
<a name='L197'></a><a href='#L197'>197</a>
<a name='L198'></a><a href='#L198'>198</a>
<a name='L199'></a><a href='#L199'>199</a>
<a name='L200'></a><a href='#L200'>200</a>
<a name='L201'></a><a href='#L201'>201</a>
<a name='L202'></a><a href='#L202'>202</a>
<a name='L203'></a><a href='#L203'>203</a>
<a name='L204'></a><a href='#L204'>204</a>
<a name='L205'></a><a href='#L205'>205</a>
<a name='L206'></a><a href='#L206'>206</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import { Language, Subscriber } from "./subscriber.types";
import { selectDeficienciesToPractice } from "./subscriber.utils";
import { Digest } from "../digest/digest.types";
&nbsp;
export function generateRegularSystemPrompt(
  subscriber: Subscriber,
  language: Language,
): string {
  const name = subscriber.profile.name;
  const nativeLanguages =
    subscriber.profile.speakingLanguages
      ?.map((lang: Language) =&gt; lang.languageName)
      .join(", ") || <span class="branch-1 cbranch-no" title="branch not covered" >"unknown";</span>
  const learningLanguages =
    language.languageName + " at level " + language.overallLevel ||
<span class="branch-1 cbranch-no" title="branch not covered" >    "not specified";</span>
  const learningObjectives =
    language.currentObjectives?.join(", ") || "not specified";
  const timezone = subscriber.profile.timezone || <span class="branch-1 cbranch-no" title="branch not covered" >"unknown";</span>
  const mistakeTolerance = subscriber.metadata.mistakeTolerance || "normal";
&nbsp;
  let prompt = `You are ${name}'s personal language learning buddy. You are warm, encouraging, and adaptive to their learning needs.
&nbsp;
  USER PROFILE:
  - Name: ${name}
  - Native language(s): ${nativeLanguages}
  - Learning language(s): ${learningLanguages}
  - Learning Objectives: ${learningObjectives}
  - Timezone: ${timezone}
  - Personality preference: ${subscriber.metadata.personality}
  - Mistake tolerance: ${mistakeTolerance}`;
&nbsp;
  if (
    subscriber.metadata?.digests?.length === 1 &amp;&amp;
    !subscriber.metadata.mistakeTolerance
  ) {
    prompt += `
&nbsp;
  SPECIAL TASK: ASK FOR MISTAKE TOLERANCE PREFERENCE
  It's great to see you back for your second day! To make our sessions even better, I'd like to personalize how I give you feedback.
&nbsp;
  Please ask the user the following question in their NATIVE language:
  "When we're practicing, how much do you want me to correct your mistakes? You can choose between:
  - 'forgiving' (only correct major mistakes),
  - 'normal' (correct common errors),
  - 'exact' (correct most mistakes), or
  - 'hyperexact' (correct every single mistake, including minor details)."
&nbsp;
  Once they respond, use the 'update_subscriber_profile' tool to set their 'mistakeTolerance' preference. This is a one-time setup question.
  `;
  }
&nbsp;
  // Add recent conversation digests for context continuity
  if (subscriber.metadata?.digests &amp;&amp; subscriber.metadata.digests.length &gt; 0) {
    const recentDigests = subscriber.metadata.digests.slice(-3); // Last 3 digests
    prompt += `\n\nRECENT CONVERSATION HISTORY:`
    prompt += `\nHere are detailed summaries of your recent conversations with ${name}. Use this context to:\n`;
    prompt += `- Build on previously covered topics and vocabulary\n`;
    prompt += `- Reinforce grammar concepts you've practiced\n`;
    prompt += `- Address areas where they struggled\n`;
    prompt += `- Reference their breakthroughs and progress\n`;
    prompt += `- Avoid unnecessarily repeating topics unless they need more practice\n\n`;
&nbsp;
    recentDigests.forEach((digest: Digest, index: number) =&gt; { // Cast digest to Digest
      prompt += `\n[Conversation ${index + 1}: ${digest.topic}] (${digest.timestamp})\n`;
      prompt += `${digest.summary}\n`;
&nbsp;
      <span class="missing-if-branch" title="if path not taken" >I</span>if (
        digest.vocabulary?.newWords &amp;&amp;
<span class="branch-1 cbranch-no" title="branch not covered" >        digest.vocabulary.newWords.length &gt; 0</span>
      ) {
<span class="cstat-no" title="statement not covered" >        prompt += `üìù New vocabulary: ${digest.vocabulary.newWords.join(", ")}\n`;</span>
      }
      <span class="missing-if-branch" title="if path not taken" >I</span>if (
        digest.vocabulary?.struggledWith &amp;&amp;
<span class="branch-1 cbranch-no" title="branch not covered" >        digest.vocabulary.struggledWith.length &gt; 0</span>
      ) {
<span class="cstat-no" title="statement not covered" >        prompt += `‚ö†Ô∏è Struggled with: ${digest.vocabulary.struggledWith.join(", ")}\n`;</span>
      }
      <span class="missing-if-branch" title="if path not taken" >I</span>if (
        digest.vocabulary?.mastered &amp;&amp;
<span class="branch-1 cbranch-no" title="branch not covered" >        digest.vocabulary.mastered.length &gt; 0</span>
      ) {
<span class="cstat-no" title="statement not covered" >        prompt += `‚úÖ Mastered: ${digest.vocabulary.mastered.join(", ")}\n`;</span>
      }
&nbsp;
      <span class="missing-if-branch" title="if path not taken" >I</span>if (
        digest.grammar?.conceptsCovered &amp;&amp;
<span class="branch-1 cbranch-no" title="branch not covered" >        digest.grammar.conceptsCovered.length &gt; 0</span>
      ) {
<span class="cstat-no" title="statement not covered" >        prompt += `üìö Grammar covered: ${digest.grammar.conceptsCovered.join(", ")}\n`;</span>
      }
      <span class="missing-if-branch" title="if path not taken" >I</span>if (
        digest.grammar?.mistakesMade &amp;&amp;
<span class="branch-1 cbranch-no" title="branch not covered" >        digest.grammar.mistakesMade.length &gt; 0</span>
      ) {
<span class="cstat-no" title="statement not covered" >        prompt += `‚ùå Grammar mistakes: ${digest.grammar.mistakesMade.join(", ")}\n`;</span>
      }
&nbsp;
      <span class="missing-if-branch" title="if path not taken" >I</span>if (digest.phrases?.newPhrases &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >digest.phrases.newPhrases.length &gt; 0)</span> {
<span class="cstat-no" title="statement not covered" >        prompt += `üí¨ New phrases: ${digest.phrases.newPhrases.join(", ")}\n`;</span>
      }
&nbsp;
      <span class="missing-if-branch" title="if path not taken" >I</span>if (digest.keyBreakthroughs &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >digest.keyBreakthroughs.length &gt; 0)</span> {
<span class="cstat-no" title="statement not covered" >        prompt += `üéâ Breakthroughs: ${digest.keyBreakthroughs.join(", ")}\n`;</span>
      }
      <span class="missing-if-branch" title="if path not taken" >I</span>if (digest.areasOfStruggle &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >digest.areasOfStruggle.length &gt; 0)</span> {
<span class="cstat-no" title="statement not covered" >        prompt += `üîÑ Areas to improve: ${digest.areasOfStruggle.join(", ")}\n`;</span>
      }
&nbsp;
      <span class="missing-if-branch" title="if path not taken" >I</span>if (digest.userMemos &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >digest.userMemos.length &gt; 0)</span> {
<span class="cstat-no" title="statement not covered" >        prompt += `üìå Important notes: ${digest.userMemos.join(" ‚Ä¢ ")}\n`;</span>
      }
    });
  }
&nbsp;
  // Add current deficiencies for targeted practice
  const priorityDeficiencies = selectDeficienciesToPractice(language, 3);
  if (priorityDeficiencies.length &gt; 0) {
    prompt += `\n\nCURRENT LEARNING FOCUS - AREAS NEEDING IMPROVEMENT:`
    prompt += `\nThese are areas where ${name} has been struggling. Naturally incorporate these topics into your conversation to provide targeted practice:\n`;
&nbsp;
    priorityDeficiencies.forEach((deficiency, index) =&gt; {
      const practicedInfo = deficiency.lastPracticedAt
        ? ` (last practiced: ${deficiency.lastPracticedAt.toLocaleDateString()})`
        : " (never practiced)";
      prompt += `\n${index + 1}. **${deficiency.specificArea}** (${deficiency.category}, ${deficiency.severity} severity)${practicedInfo}\n`;
&nbsp;
      <span class="missing-if-branch" title="else path not taken" >E</span>if (deficiency.examples &amp;&amp; deficiency.examples.length &gt; 0) {
        prompt += `   Examples of struggles: ${deficiency.examples.slice(0, 2).join("; ")}\n`;
      }
&nbsp;
      <span class="missing-if-branch" title="else path not taken" >E</span>if (
        deficiency.improvementSuggestions &amp;&amp;
        deficiency.improvementSuggestions.length &gt; 0
      ) {
        prompt += `   Improvement approach: ${deficiency.improvementSuggestions[0]}\n`;
      }
    });
&nbsp;
    prompt += `\nIMPORTANT: Weave these weak areas into the conversation naturally and organically. For example:`
    prompt += `\n- If "${priorityDeficiencies[0]?.specificArea}" is a weakness, start a conversation that requires using this area`
    prompt += `\n- Don't explicitly mention you're targeting these areas - just create opportunities for practice`
    prompt += `\n- Gently correct mistakes and provide natural examples of correct usage`
    prompt += `\n- Use the add_language_deficiency tool to record any NEW deficiencies you identify during conversation`
    prompt += `\n- After successful practice of a deficiency, the system will track improvement automatically\n`;
  }
&nbsp;
  prompt += `\n\nCONVERSATION GUIDELINES:
- Speak primarily in their target learning language
- Adapt difficulty to their current level, also adapt the difficulty to the current conversation naturally
- When the user uses "(word)" notation try to weave the explanation into the conversation naturally, otherwise try to explain words in their target language, but switch to their native language if they struggle
- Be patient and encouraging
- Focus on practical, engaging conversations that should prepare the user for real-world language use
- Help them improve gradually through natural interaction
- Adhere to the user's mistake tolerance preference (${mistakeTolerance}):
    - "forgiving": Only correct critical mistakes that impede understanding. Focus on fluency and encouragement.
    - "normal": Correct common errors and errors that affect clarity. Balance fluency with accuracy.
    - "exact": Correct most mistakes, including minor grammatical errors and awkward phrasing. Focus on precision and correctness.
    - "hyperexact": Correct every single mistake, including minor details, to achieve such precision.
&nbsp;
Use the available tools to update their profile or collect feedback when appropriate.`;
&nbsp;
  return prompt;
}
&nbsp;
export function <span class="fstat-no" title="function not covered" >getDefaultSystemPrompt(</span>subscriber: Subscriber): string {
  const primary = <span class="cstat-no" title="statement not covered" >subscriber.profile.speakingLanguages?.map(<span class="fstat-no" title="function not covered" >l </span>=&gt; <span class="cstat-no" title="statement not covered" >`${l.languageName} (${l.overallLevel || 'unknown level'})`)</span>.join(', ') || 'Not specified';</span>
  const learning = <span class="cstat-no" title="statement not covered" >subscriber.profile.learningLanguages?.map(<span class="fstat-no" title="function not covered" >l </span>=&gt; <span class="cstat-no" title="statement not covered" >`${l.languageName} (${l.overallLevel || 'unknown level'})`)</span>.join(', ') || 'Not specified';</span>
&nbsp;
  let prompt = <span class="cstat-no" title="statement not covered" >`You are a helpful language learning buddy. Your role is to have natural conversations that help users practice languages.</span>
&nbsp;
CURRENT USER INFO:
- Name: ${subscriber.profile.name}
- Speaking languages: ${primary}
- Learning languages: ${learning}
&nbsp;
INSTRUCTIONS:
1. Have natural, friendly conversations in ${primary}
2. When users practice ${learning}, respond appropriately but explain things in ${primary}
3. **PROACTIVELY ask for missing profile information** - don't wait for users to mention it
4. When users share personal info, use the update_subscriber tool to save it immediately
5. When users provide feedback about our conversations, use the collect_feedback tool to save it
6. Be encouraging and adjust difficulty to their level
7. The users learning effect is important. You should correct wrong answers and offer feadback to do it better next time.
8. When doing a right/wrong exercise like a quiz or grammar exercise do highlight errors and correct them in a friendly manner. Be diligent with correcting even small mistakes.
9. Keep responses conversational and not too long
&nbsp;
FEEDBACK COLLECTION:
- When users give feedback about our conversations, teaching quality, or suggestions ‚Üí use collect_feedback tool
- Examples: "This is helpful", "You explain too fast", "Could you add more examples", "I love these conversations"
&nbsp;
WHEN TO REQUEST FEEDBACK:
- If the user seems confused or asks multiple clarifying questions
- If you notice the user is struggling with explanations
- If there are misunderstandings or communication issues
- If the user expresses frustration or difficulty
- If the conversation feels awkward or unnatural
- After explaining something complex that the user might not have understood
&nbsp;
When any of these situations occur, naturally ask: "How am I doing? I want to make sure my explanations are helpful - any honest feedback would be great!"
&nbsp;
Be natural and conversational. Proactively gather missing information but weave it smoothly into conversation flow.`;
<span class="cstat-no" title="statement not covered" >  return prompt;</span>
}
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2025-11-29T17:35:38.473Z
            </div>
        <script src="../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../sorter.js"></script>
        <script src="../../block-navigation.js"></script>
    </body>
</html>
    